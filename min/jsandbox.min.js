//@source http://github.com/eligrey/jsandbox/blob/master/src/jsandbox.js
"use strict";var Sandbox=(function(){if(typeof Worker==="undefined"){return}var f="eval",v="exec",o="load",l="requests",c="input",q="terminate",d="data",n="callback",m="onerror",g="worker",h="onresponse",t="prototype",b="string",j="function",r=function(){var i=this;if(!(i instanceof r)){return new r()}i[g]=new Worker(r.url);i[l]={};i[g].onmessage=function(y){var z=y[d],x;if(typeof z===b){try{z=JSON.parse(z)}catch(A){return}}if(typeof z!=="object"){return}x=i[l][z.id];if(x){if(z.error){if(typeof i[m]===j){i[m](z)}if(typeof x[m]===j){x[m].call(i,z.error)}}else{if(typeof i[h]===j){i[h](z)}if(typeof x[n]===j){x[n].call(i,z.results)}}delete i[l][z.id]}}},p=r[t],k=function(i){p[i]=function(z,C,y,x){if(typeof z===b||Object[t].toString.call(z)==="[object Array]"||arguments.length>1){z={data:z,input:y,callback:C,onerror:x}}if(i===o&&typeof z[d]===b){z[d]=[z[d]]}var A=z[d],B=this.createRequestID();y=z[c];delete z[d];delete z[c];this[l][B]=z;this[g].postMessage({id:B,method:i,data:A,input:y,toString:function(){return JSON.stringify(this)}});return B};r[i]=function(){var x=new r();x[h]=x[m]=function(){x[q]();x=null};r[t][i].apply(x,Array[t].slice.call(arguments));return r}},w=document,a=w.getElementsByTagName("link"),e,u=[f,o,v],s=3;while(s--){k(u[s])}p[q]=function(){this[l]={};this[g][q]()};p.abort=function(i){delete this[l][i]};p.createRequestID=function(){var i=Math.random().toString();if(i in this[l]){return this.createRequestID()}return i};(typeof JSON==="undefined"&&((w.getElementsByTagName("head")[0]||w.documentElement).appendChild(w.createElement("script")).src="http://github.com/eligrey/jsandbox/raw/master/min/json2.js"));s=a.length;while(s--){e=a[s];if(e.getAttribute("rel")==="jsandbox"){(e.hasAttribute("href")&&(r.url=e.getAttribute("href")));break}}p=k=w=a=e=u=s=undefined;return r}());
