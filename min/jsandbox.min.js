//@source http://github.com/eligrey/jsandbox/blob/master/src/jsandbox.js
var JSandbox=(function(u,l){var m="undefined",F=u.document,e=u.Worker;if(typeof e===m||typeof F===m){return}var d=u.JSON,h="eval",E="exec",v="load",p="requests",c="input",x="terminate",g="data",t="callback",s="onerror",k="worker",n="onresponse",C="prototype",b="call",B="string",f="function",y=function(){var i=this;if(!(i instanceof y)){return new y()}i[k]=new e(y.url);i[p]={};i[k].onmessage=function(H){var I=H[g],G;if(typeof I===B){try{I=d.parse(I)}catch(J){return}}if(typeof I!=="object"){return}G=i[p][I.id];if(G){if(I.error){if(typeof i[s]===f){i[s](I,G)}if(typeof G[s]===f){G[s][b](i,I.error)}}else{if(typeof i[n]===f){i[n](I,G)}if(typeof G[t]===f){G[t][b](i,I.results)}}delete i[p][I.id]}}},w=y[C],z=function(){return d.stringify(this)},o=function(i){w[i]=function(I,L,H,G){if(typeof I===B||Object[C].toString[b](I)==="[object Array]"||arguments.length>1){I={data:I,input:H,callback:L,onerror:G}}if(i===v&&typeof I[g]===B){I[g]=[I[g]]}var J=I[g],K=this.createRequestID();H=I[c];delete I[g];delete I[c];this[p][K]=I;this[k].postMessage({id:K,method:i,data:J,input:H,toString:z});return K};y[i]=function(){var G=new y();G[n]=G[s]=function(){G[x]();G=null};y[C][i].apply(G,Array[C].slice[b](arguments));return y}},a=F.getElementsByTagName("link"),D=[h,v,E],A=3,q=true,r=[];y.ready=function(i){if(q){try{i()}catch(G){}}else{r.unshift(i)}};while(A--){o(D[A])}w[x]=function(){this[p]={};this[k][x]()};w.abort=function(i){delete this[p][i]};w.createRequestID=function(){var i=Math.random().toString();if(i in this[p]){return this.createRequestID()}return i};if(typeof d===m){q=false;var j=F.createElement("script");j.type="text/javascript";j.onload=function(){if(u.JSON){d=u.JSON;q=true;var G=r.length;while(G--){try{r.pop()()}catch(H){}}}};j.src="http://github.com/eligrey/jsandbox/raw/master/min/json2.js";F.documentElement.appendChild(j)}A=a.length;while(A--){if(a[A].getAttribute("rel")==="jsandbox"){y.url=a[A].getAttribute("href");break}}return y}(self,eval)),Sandbox=JSandbox;
