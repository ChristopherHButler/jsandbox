//@source http://github.com/eligrey/jsandbox/blob/master/src/jsandbox.js
"use strict";var JSandbox=(function(t){var l="undefined",E=t.document,e=t.Worker;if(typeof e===l||typeof E===l){return}var d=t.JSON,h="eval",D="exec",u="load",o="requests",c="input",w="terminate",g="data",s="callback",r="onerror",k="worker",m="onresponse",B="prototype",b="call",A="string",f="function",x=function(){var i=this;if(!(i instanceof x)){return new x()}i[k]=new e(x.url);i[o]={};i[k].onmessage=function(G){var H=G[g],F;if(typeof H===A){try{H=d.parse(H)}catch(I){return}}if(typeof H!=="object"){return}F=i[o][H.id];if(F){if(H.error){if(typeof i[r]===f){i[r](H,F)}if(typeof F[r]===f){F[r][b](i,H.error)}}else{if(typeof i[m]===f){i[m](H,F)}if(typeof F[s]===f){F[s][b](i,H.results)}}delete i[o][H.id]}}},v=x[B],y=function(){return d.stringify(this)},n=function(i){v[i]=function(H,K,G,F){if(typeof H===A||Object[B].toString[b](H)==="[object Array]"||arguments.length>1){H={data:H,input:G,callback:K,onerror:F}}if(i===u&&typeof H[g]===A){H[g]=[H[g]]}var I=H[g],J=this.createRequestID();G=H[c];delete H[g];delete H[c];this[o][J]=H;this[k].postMessage({id:J,method:i,data:I,input:G,toString:y});return J};x[i]=function(){var F=new x();F[m]=F[r]=function(){F[w]();F=null};x[B][i].apply(F,Array[B].slice[b](arguments));return x}},a=E.getElementsByTagName("link"),C=[h,u,D],z=3,p=true,q=[];x.ready=function(i){if(p){try{i()}catch(F){}}else{q.unshift(i)}};while(z--){n(C[z])}v[w]=function(){this[o]={};this[k][w]()};v.abort=function(i){delete this[o][i]};v.createRequestID=function(){var i=Math.random().toString();if(i in this[o]){return this.createRequestID()}return i};if(typeof d===l){p=false;var j=E.createElement("script");j.type="text/javascript";j.onload=function(){if(t.JSON){d=t.JSON;p=true;var F=q.length;while(F--){try{q.pop()()}catch(G){}}}};j.src="http://github.com/eligrey/jsandbox/raw/master/min/json2.js";E.documentElement.appendChild(j)}z=a.length;while(z--){if(a[z].getAttribute("rel")==="jsandbox"){x.url=a[z].getAttribute("href");break}}return x}(self)),Sandbox=JSandbox;
